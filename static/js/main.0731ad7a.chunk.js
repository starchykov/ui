(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{119:function(e,t,n){e.exports={appWrapper:"App_appWrapper__2tfMT",appContent:"App_appContent__3nq_u"}},155:function(e,t,n){},28:function(e,t,n){e.exports={loginBox:"Login_loginBox__1p4CD",commonError:"Login_commonError__3nMxi",inputContainer:"Login_inputContainer__1u4gd",checkBox:"Login_checkBox__2UiTQ"}},281:function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(0),a=n(51),o=n.n(a),c=(n(155),n(113)),s=n(114),u=n(124),l=n(123),d=n(10),j=n(9),h=n(20),p=n(8),b=n(76),m=n.n(b),O=n(117),f=n(118).create({baseURL:"https://starchykov.herokuapp.com/",withCredentials:!0,headers:{}}),x={Login:function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,f.post("user/login",Object(p.a)({},t)).then((function(e){return e})).catch((function(e){return console.log(e.status),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Logout:function(e){return f.delete("user/login").then((function(e){return e.data}))}},g=function(){return f.get("auth/me").then((function(e){return e.data}))},_=n(52),v="AUTHORIZE-ME",L="SET-USER-INFO",z="DEL-USER-INFO",A={authData:{id:null,login:null,email:null},isAuthorized:!1,currentUser:{aboutMe:null,fullName:null,userId:null,photos:{small:null,large:null}}},F=function(e){return function(e){return g().then((function(t){var n;0===t.resultCode&&e((n=!0,{type:v,authData:t.data,isAuthorized:n}))}))}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(p.a)(Object(p.a)({},e),{},{authData:Object(p.a)({},t.authData),isAuthorized:t.isAuthorized});case L:return Object(p.a)(Object(p.a)({},e),{},{currentUser:t.currentUserData});case z:return Object(p.a)(Object(p.a)({},e),{},{authData:Object(p.a)({},A.authData),isAuthorized:t.isAuthorized});default:return e}},I="APP-INITIALIZED",C={isInitialized:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(p.a)(Object(p.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},w=n(119),k=n.n(w),E=n(55),D=n.n(E),M=n.p+"static/media/Logo.764dc346.png",P=function(){return Object(r.jsx)("img",{src:M,alt:"logo"})},S=n(30),U=function(){return Object(r.jsxs)("header",{className:D.a.header,children:[Object(r.jsx)("h1",{children:"Subscribe"}),Object(r.jsx)(P,{}),Object(r.jsx)("h1",{children:Object(r.jsx)(S.b,{to:"/login",activeClassName:D.a.active,className:D.a.menuItem,children:"Login"})})]})},B=n(28),R=n.n(B),T=n(110),W=n(111),q=function(e){if(!e)return"Field is empty"},H=n(57),J=n(42),X=n.n(J),Z=function(e){e.input;var t=e.meta,n=(e.child,Object(H.a)(e,["input","meta","child"])),i=t.touched&&t.error;return Object(r.jsxs)(r.Fragment,{children:[i&&Object(r.jsx)("span",{className:"LoginForm"===t.form?X.a.LoginForm:X.a.AddPostForm,children:t.error}),n.children]})},Q=function(e){var t=e.input,n=e.meta,i=(e.child,Object(H.a)(e,["input","meta","child"]));return Object(r.jsxs)(Z,Object(p.a)(Object(p.a)({},e),{},{children:[" ",Object(r.jsx)("input",Object(p.a)(Object(p.a)({className:n.touched&&n.error&&X.a.error},t),i))]}))},G=Object(W.a)({form:"LoginForm"})((function(e){return e.isAuthorized?Object(r.jsx)(d.a,{to:"/profile"}):Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:e.error&&Object(r.jsx)("span",{className:R.a.commonError,children:e.error})}),Object(r.jsxs)("div",{className:R.a.inputContainer,children:[Object(r.jsx)("span",{children:"Login"}),Object(r.jsx)(T.a,{component:Q,name:"email",type:"text",placeholder:"Login",validate:[q],error:e.error})]}),Object(r.jsxs)("div",{className:R.a.inputContainer,children:[Object(r.jsx)("span",{children:"Password"}),Object(r.jsx)(T.a,{component:Q,name:"password",type:"password",placeholder:"Password",validate:[q],error:e.error})]}),Object(r.jsxs)("div",{className:R.a.inputContainer,children:[Object(r.jsx)(T.a,{className:R.a.checkBox,component:Q,name:"rememberMe",type:"checkbox"}),Object(r.jsx)("span",{children:"Remember me"}),Object(r.jsx)("button",{children:"Login"})]})]})})),K=Object(h.b)((function(e){return{isAuthorized:e.authorization.isAuthorized}}),{LoginMe:function(e){return function(t){x.Login(e).then((function(e){if(200===e.status)t(F());else{var n=e.message.length>0?e.message:"Some error has occurred";t(Object(_.a)("LoginForm",{_error:n}))}}))}}})((function(e){return Object(r.jsxs)("div",{className:R.a.loginBox,children:[Object(r.jsx)("h1",{children:"Welcome back"}),Object(r.jsx)(G,Object(p.a)({onSubmit:function(t){return e.LoginMe(t)}},e))]})})),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initialization()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:k.a.appWrapper,children:[Object(r.jsx)(U,{}),Object(r.jsx)(d.b,{path:"/login",render:function(){return Object(r.jsx)(K,{})}})]})}}]),n}(i.Component),Y=Object(j.d)(Object(h.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initialization:function(){return function(e){e(F()).then((function(){return e({type:I,isInitialized:!0})}))}}}),d.f)(V),$=n(122),ee=n(112),te=Object(j.c)({authorization:N,form:ee.a,app:y}),ne=Object(j.e)(te,Object(j.a)($.a)),re=ne;window.store=ne,o.a.render(Object(r.jsx)(S.a,{children:Object(r.jsx)(h.a,{store:re,children:Object(r.jsx)(Y,{})})}),document.getElementById("root"))},42:function(e,t,n){e.exports={error:"FormControl_error__PgXFX",LoginForm:"FormControl_LoginForm__1LLEA",AddPostForm:"FormControl_AddPostForm__gAmcN"}},55:function(e,t,n){e.exports={header:"Header_header__34pq8"}}},[[281,1,2]]]);
//# sourceMappingURL=main.0731ad7a.chunk.js.map